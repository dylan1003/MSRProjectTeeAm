@model MSR_Web_App.Models.PortfolioCreateViewModel
@{
    ViewBag.Title = "Portfolio Creation";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Scripts
{
    <script src="@Url.Content("~/Scripts/content-form.js")"></script>
}

<head>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/content-form.js")"></script>
</head>

<style>
    img {
        cursor: zoom-in;
    }
</style>

<div class="row">
    @* display basic veteran information*@
    <div class="card-block px-2" id="block" data-simplebar style="overflow-y:auto;">
        <hr>
        <h4 class="card-title">About</h4>

        <table class="table card-text">
            <tbody>
                <tr>
                    <th scope="row">
                        @Html.DisplayNameFor(model => model.Veteran.FirstName)
                    </th>
                    <td>
                        @Html.DisplayFor(model => model.Veteran.FirstName)
                    </td>
                </tr>
                <tr>
                    <th scope="row">
                        @Html.DisplayNameFor(model => model.Veteran.MiddleName)
                    </th>
                    <td>
                        @Html.DisplayFor(model => model.Veteran.MiddleName)
                    </td>
                </tr>
                <tr>
                    <th scope="row">
                        @Html.DisplayNameFor(model => model.Veteran.Surname)
                    </th>
                    <td>
                        @Html.DisplayFor(model => model.Veteran.Surname)
                    </td>
                </tr>
                <tr>
                    <th scope="row">
                        @Html.DisplayNameFor(model => model.Veteran.DOB)
                    </th>
                    <td>
                        @Html.DisplayFor(model => model.Veteran.DOB)
                    </td>
                </tr>
                <tr>
                    <th scope="row">
                        @Html.DisplayNameFor(model => model.Veteran.RegimentNumber)
                    </th>
                    <td>
                        @Html.DisplayFor(model => model.Veteran.RegimentNumber)
                    </td>
                </tr>
                <tr>
                    <th scope="row">
                        @Html.DisplayNameFor(model => model.Veteran.Address)
                    </th>
                    <td>
                        @Html.DisplayFor(model => model.Veteran.Address)
                    </td>
                </tr>
                <tr>
                    <th scope="row" style="margin-right:1px;">
                        @Html.DisplayNameFor(model => model.Veteran.ShortBio)
                    </th>
                    <td>
                        @Html.DisplayFor(model => model.Veteran.ShortBio)
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="row">
    @*Loop through Sections in Model and display*@
    @for (int s = 0; s < Model.Sections.Count; s++)
    {
        <section id="section" class="section">
            <p>@Model.Sections.ElementAt(s).EventTitle</p>

            @*Loop through Contents in Sections and display*@
            @for (int c = 0; c < @Model.Sections.ElementAt(s).Contents.Count; c++)
            {
                int a = 0;
                <section id="content-@Model.Sections.ElementAt(s).Contents.ElementAt(c).Id" class="content">
                    @using (Html.BeginForm("DeleteContent", "Home"))
                    {

                        <div class="form-group">
                            @Html.HiddenFor(section => section.Sections.ElementAt(s).Contents.ElementAt(c).Id)
                            @Html.HiddenFor(section => section.Sections.ElementAt(s).Contents.ElementAt(c).Section.Id)
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(section => section.Sections.ElementAt(s).Contents.ElementAt(c).Title)
                            @Html.TextBoxFor(section => section.Sections.ElementAt(s).Contents.ElementAt(c).Title)
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(section => section.Sections.ElementAt(s).Contents.ElementAt(c).Timestamp)
                            @Html.TextBoxFor(section => section.Sections.ElementAt(s).Contents.ElementAt(c).Timestamp)
                        </div>
                        <div class="form-group" id="type">
                            @Html.LabelFor(section => section.Sections.ElementAt(s).Contents.ElementAt(c).type)
                            @Html.TextBoxFor(section => section.Sections.ElementAt(s).Contents.ElementAt(c).type)
                        </div>
                        <div class="hidden" id="type2-@a"><input /></div>
                        <div class="form-group">
                            @Html.LabelFor(section => section.Sections.ElementAt(s).Contents.ElementAt(c).source)
                            @Html.TextBoxFor(section => section.Sections.ElementAt(s).Contents.ElementAt(c).source)
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(section => section.Sections.ElementAt(s).Contents.ElementAt(c).DisplayPosition)
                            @Html.TextBoxFor(section => section.Sections.ElementAt(s).Contents.ElementAt(c).DisplayPosition)
                        </div>
                        <button type="submit">Delete Content</button>
                    }
                </section>
                a++;
            }

            @* Form for adding content to a section *@
            @using (Html.BeginForm("AddContent", "Veterans"))
            {
                @Html.HiddenFor(section => section.content.Id)

                @Html.HiddenFor(section => section.content.Section.Id, new { Value = Model.Sections.ElementAt(s).Id })

                <div class="form-group">
                    @Html.LabelFor(section => section.content.Title)
                    @Html.TextBoxFor(section => section.content.Title, new { Value = "" })
                </div>

                <button type="submit">Add Content</button>
            }
        </section>

    }
    <h3>Section Creator</h3>

    @* auto generate ID code here *@
    @using (Html.BeginForm("AddSection", "Veterans"))
    {

        @Html.HiddenFor(s => s.section.Id)

        @Html.LabelFor(s => s.section.EventTitle)
        @Html.TextBoxFor(s => s.section.EventTitle)

        @Html.LabelFor(s => s.section.Approved)
        @Html.TextBoxFor(s => s.section.Approved)

        @Html.LabelFor(s => s.section.DisplayPosition)
        @Html.TextBoxFor(s => s.section.DisplayPosition)

        <button type="submit">Add Section</button>
    }

</div>